<!--
  Generated template for the MapSearchPage page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-navbar *navbar class="map-search">
  <ion-buttons start>
    <button menuToggle>
        <ion-icon name="menu"></ion-icon>
      </button>
  </ion-buttons>
  <ion-buttons>
    <ion-searchbar hideCancelButton [(ngModel)]="searchQuery" (focus)="currentDiv='searchlist'" (input)="getItems($event)" placeholder="城市/地址/MLS#"></ion-searchbar>
  </ion-buttons>
  <ion-buttons end>
    <button class="btn-options" (click)="currentDiv= (currentDiv == 'mapoption')? '':'mapoption'">
        <ion-icon name="options"></ion-icon>
      </button>

  </ion-buttons>
  <ion-buttons end>
    <button class="btn-options" (click)="setLocation(center,16)">
        <ion-icon name="locate"></ion-icon>
      </button>

  </ion-buttons>


</ion-navbar>

<ion-content class="map-search">
  <div class="search_list" *ngIf="currentDiv == 'searchlist'">
    <ion-item padding *ngFor="#item of cityItems" (click)="itemTapped($event, item,1)">
      {{ item.value }}
    </ion-item>
    <ion-item padding *ngFor="#item of mlsItems" (click)="itemTapped($event, item,2)">
      {{ item.value }}
    </ion-item>
    <ion-item padding *ngFor="#item of addressItems" (click)="itemTapped($event, item,3)">
      {{ item.value }}
    </ion-item>
  </div>
  <div class="map_options" *ngIf="currentDiv == 'mapoption'">
    <ion-list>
      <ion-item>
        <ion-label>物业类型</ion-label>
        <ion-select [(ngModel)]="selectType" okText="确认" cancelText="取消">
          <ion-option value="1">独立屋</ion-option>
          <ion-option value="2">半独立</ion-option>
          <ion-option value="3">楼房</ion-option>
        </ion-select>
      </ion-item>

      <ion-item>
        <ion-label>价格(万)</ion-label>
        <ion-select [(ngModel)]="selectPrice" okText="确认" cancelText="取消">
          <ion-option value="0-50">50</ion-option>
          <ion-option value="50-100">50-100</ion-option>
          <ion-option value="100-200">100-200</ion-option>
        </ion-select>
      </ion-item>

      <ion-item>
        <ion-label>卧室</ion-label>
        <ion-select [(ngModel)]="selectBeds" okText="确认" cancelText="取消">
          <ion-option value="1">1</ion-option>
          <ion-option value="2">2</ion-option>
          <ion-option value="3">3</ion-option>
          <ion-option value="4">4</ion-option>
          <ion-option value="5">5</ion-option>
          <ion-option value="6">6</ion-option>
        </ion-select>
      </ion-item>

      <ion-item>
        <ion-label>洗手间</ion-label>
        <ion-select [(ngModel)]="selectBaths" okText="确认" cancelText="取消">
          <ion-option value="1">1</ion-option>
          <ion-option value="2">2</ion-option>
          <ion-option value="3">3</ion-option>
          <ion-option value="4">4</ion-option>
        </ion-select>
      </ion-item>

      <ion-item>
        <ion-label>房屋面积</ion-label>
        <ion-select [(ngModel)]="selectHousesize" okText="确认" cancelText="取消">
          <ion-option value="1">独立屋</ion-option>
          <ion-option value="2">半独立</ion-option>
          <ion-option value="3">楼房</ion-option>
        </ion-select>
      </ion-item>

      <ion-item>
        <ion-label>土地面积</ion-label>
        <ion-select [(ngModel)]="selectLandsize" okText="确认" cancelText="取消">
          <ion-option value="1">独立屋</ion-option>
          <ion-option value="2">半独立</ion-option>
          <ion-option value="3">楼房</ion-option>
        </ion-select>
      </ion-item>
    </ion-list>
    <ion-row>
      <ion-col>
        <div text-center>
          <button outline primary (click)="resetSelections()">
             <ion-icon name="close"></ion-icon>选择复位
          </button>
        </div>
      </ion-col>
      <ion-col>
         <div text-center>
        <button outline primary (click)="updateOption()">
          <ion-icon name="checkmark"></ion-icon> 确认
        </button>
         </div>
      </ion-col>
    </ion-row>
  </div>

  <div class="house_list" *ngIf="listShow()">
    <ion-slides [options]="swiperOptions" class="swiper-container">
      <ion-slide *ngFor="#house of currentHouseList" class="swiper-slide" (click)="gotoHouseDetail(house.MLS)">
        <ion-card class="house_card">
          <img [src]="imgHost + house.CoverImg" />
          <div padding-left class="house_desc">
            <div class="card-title" primary text-left text-nowrap>MLS:{{house.MLS}}-{{house.Address}}万</div>
            <div class="card-subtitle" text-left>
              <div ><label>类型：</label> {{house.HouseType}}:{{house.Beds}}卧{{house.Baths}}卫{{house.Kitchen}}厨</div>
              <div> <label>城市：</label>{{house.Address}},{{house.MunicipalityName}},{{house.ProvinceCname}}</div>
            </div>
          </div>
        </ion-card>
      </ion-slide>

    </ion-slides>
  </div>


  <div class="house_list" *ngIf="currentDiv == 'singleMarkerList'">
    <ion-slides [options]="swiperOptions" class="swiper-container">
      <ion-slide *ngFor="#house of currentHouses" class="swiper-slide" (click)="gotoHouseDetail(house.MLS)">
        <ion-card class="house_card">
          <img [src]="imgHost + house.CoverImg" />
          <div padding-left class="house_desc">
            <div class="card-title" primary text-left text-nowrap>MLS:{{house.MLS}}-{{house.Address}}万</div>
            <div class="card-subtitle" text-left>
              <div ><label>类型：</label> {{house.HouseType}}:{{house.Beds}}卧{{house.Baths}}卫{{house.Kitchen}}厨</div>
              <div> <label>城市：</label>{{house.Address}},{{house.MunicipalityName}},{{house.ProvinceCname}}</div>
            </div>
          </div>
        </ion-card>
      </ion-slide>

    </ion-slides>
  </div>

  <div id="map"></div>

  <div *ngIf="true">
    <button fab  primary outline fab-bottom fab-center (click)="currentDiv = (currentDiv == 'houselist')? '':'houselist'">
      <ion-icon name="list-box" is-active="true"></ion-icon>
    </button>
  </div>

</ion-content>